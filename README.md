# Plex Utilities Toolkit

This project is a collection of tools designed to help manage and optimize your media library in **Plex Media Server**. It includes scripts for:

- Detecting missing TV show episodes (by comparing with TheTVDB)
- Exporting detailed movie data to CSV
- Moving low-rated IMDb movies
- Renaming movie files based on metadata

---

## üì¶ Requirements

- The `title.basics.tsv` file can be downloaded from IMDb datasets: https://datasets.imdbws.com/ (used for additional metadata enrichment).

- Python 3.7+
- `virtualenv` (recommended)
- Access to a Plex server on your local network
- A [TheTVDB](https://thetvdb.com/) API Key

---

## ‚öôÔ∏è Configuration

Create a `plex.config.json` file in the root directory with the following structure:

```json
{
  "PLEX_BASE_URL": "http://YOUR_PLEX_IP:32400",
  "PLEX_TOKEN": "YOUR_PLEX_TOKEN",
  "THETVDB_APIKEY": "YOUR_TVDB_APIKEY",
  "TITLE_BASICS_FILE": "title.basics.tsv",
  "DEBUG": 0,
  "IGNORE_LIST": []
}
```

---

## üêç Virtual Environment Setup

It's recommended to use a virtual environment to avoid dependency issues:

```bash
# Install virtualenv if needed
pip install virtualenv

# Create the virtual environment
virtualenv venv

# Activate it (Linux/macOS)
source venv/bin/activate

# Activate it (Windows)
venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt
```

---

## üìÑ Included Scripts

### 1. `missing_ep.py` ‚Äì Find Missing TV Episodes

Fetches TV shows from Plex and compares episodes with TheTVDB.

```bash
python3 missing_ep.py [-d]
```

- `-d` ‚Äì Enable debug mode
- Outputs missing episodes per show and season

---

### 2. `plex_extract3.py` ‚Äì Export Movies to CSV

Extracts movie data (title, IMDb, path, size, rating) from Plex and saves it to a CSV file.

```bash
python3 plex_extract3.py [-d] [-c config_path]
```

- `-d` ‚Äì Debug mode
- `-c` ‚Äì Config file path (optional)
- Output: `plex_movies_export.csv`

---

### 3. `move_imdbrating.sh` ‚Äì Move Low IMDb Rated Movies

A Bash script that moves movie folders with ratings below a specified threshold.

```bash
./move_imdbrating.sh <max_rating> <destination_dir>
```

Example:

```bash
./move_imdbrating.sh 4.0 /mnt/nas/bad_movies
```

Requires the `plex_movies_export.csv` generated by the extractor.

---

### 4. `plex_renamer1.7.1.py` ‚Äì Rename Movie Files

Compares movie filenames with official titles from Plex. Suggests renaming if the match is strong.

```bash
python3 plex_renamer1.7.1.py [-d]
```

- Files are renamed to: `Title (Year) {imdb-ttXXXX}`
- Skips one-word filenames
- Writes changes to `rename.log`

---

## üß™ `requirements.txt`

```text
requests
colorama
```

---

## üìú License

This project is for personal and educational use only. Not affiliated with Plex or TheTVDB.

---

